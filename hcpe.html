<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Dictado + Lectura</title>
</head>
<body>
  <h1>Historia ClÃ­nica Digital</h1>

  <label for="motivoConsulta"><strong>Motivo de consulta:</strong></label><br>
  <textarea id="motivoConsulta" rows="5" cols="60" placeholder="DictÃ¡ o escribÃ­ el motivo..."></textarea><br>

  <!-- Botones -->
  <button onclick="iniciarDictado('motivoConsulta')">ðŸŽ¤ Dictar</button>
  <button onclick="leerTexto('motivoConsulta')">ðŸ”Š Leer</button>

  <hr>

  <label for="antecedentes"><strong>Antecedentes:</strong></label><br>
  <textarea id="antecedentes" rows="5" cols="60" placeholder="DictÃ¡ o escribÃ­ los antecedentes..."></textarea><br>

  <button onclick="iniciarDictado('antecedentes')">ðŸŽ¤ Dictar</button>
  <button onclick="leerTexto('antecedentes')">ðŸ”Š Leer</button>

  <!-- Scripts -->
  <script>
    function iniciarDictado(idCampo) {
      const campo = document.getElementById(idCampo);
      const Reconocimiento = window.SpeechRecognition || window.webkitSpeechRecognition;

      if (!Reconocimiento) {
        alert("Tu navegador no soporta reconocimiento de voz.");
        return;
      }

      const reconocimiento = new Reconocimiento();
      reconocimiento.lang = "es-AR";
      reconocimiento.interimResults = false;
      reconocimiento.maxAlternatives = 1;

      reconocimiento.onresult = (event) => {
        const texto = event.results[0][0].transcript;
        campo.value += texto + " ";
      };

      reconocimiento.onerror = (event) => {
        alert("Error de dictado: " + event.error);
      };

      reconocimiento.start();
    }

    function leerTexto(idCampo) {
      const texto = document.getElementById(idCampo).value;
      if (texto.trim() === "") {
        alert("El campo estÃ¡ vacÃ­o.");
        return;
      }
      const voz = new SpeechSynthesisUtterance(texto);
      voz.lang = "es-AR";
      speechSynthesis.speak(voz);
    }
  </script>
</body>
</html>
